(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),s=a(11),o=a.n(s),i=(a(35),a(36),a(4)),c=a(5),l=a(7),u=a(6),m=a(27),h=a(8),d=a.n(h),g=a(0),b=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={query:""},e.handleChange=function(t){var a=t.target,r=a.name,n=a.value;e.setState(Object(m.a)({},r,n))},e.handleSubmit=function(t){t.preventDefault();var a=e.state.query;""!==a.trim()?(e.props.onSubmit(a),e.setState({query:""})):alert("Enter query before submit")},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state.query,t=this.handleSubmit,a=this.handleChange;return Object(g.jsx)("header",{className:d.a.SearchBar,children:Object(g.jsxs)("form",{className:d.a.SearchForm,onSubmit:t,children:[Object(g.jsx)("button",{type:"submit",className:d.a.SearchFormBtn,children:Object(g.jsx)("span",{className:d.a.SearchFormBtnLabel,children:"Search"})}),Object(g.jsx)("input",{className:d.a.SearchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:e,name:"query",onChange:a})]})})}}]),a}(r.Component),y=b,p=a(16),f=a(28),j=a.n(f),O=a(13),I=a.n(O);var v=function(e){var t=e.imgSrc,a=e.tags,r=e.modalImageURL,n=e.handleImageClick;return Object(g.jsx)("li",{className:I.a.ImageGalleryItem,children:Object(g.jsx)("img",{src:t,alt:a,onClick:function(){return n(a,r)},className:I.a.ImageGalleryItemIMG})})},S=a(29),x=a.n(S);var N=function(e){var t=e.handleBtnClick,a=e.btnVisibility;return Object(g.jsx)("button",{className:x.a.Button,type:"button",onClick:t,style:{visibility:a},children:"Load More"})},_=a(14),B=a.n(_);B.a.defaults.baseURL="https://pixabay.com/api/";var k={getImages:function(e,t){return B.a.get('?image_type="photo"&orientation="horizontal"&q='.concat(e,"&page=").concat(t,"&per_page=12&key=").concat("23141283-b767010b5d5526766e0fab830"))}},C=a(30),L=a.n(C),M="idle",w="pending",q="resolved",F="rejected",G=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={arrayOfImagesByQuery:[],error:null,status:M,pageNumber:1,btnVisibility:"visible",listHeight:""},e.setListOffsetHeight=function(){e.setState({listHeight:document.getElementById("galleryList").offsetHeight})},e.resetPageNumber=function(){e.setState({pageNumber:1})},e.LoadMoreBtnClick=function(){var t=e.props.queryName;e.setListOffsetHeight(),e.setState({status:w}),k.getImages(t,e.state.pageNumber).then((function(t){var a=t.data.hits;a.length<12&&e.setState({btnVisibility:"hidden"}),e.setState((function(t){return{arrayOfImagesByQuery:[].concat(Object(p.a)(t.arrayOfImagesByQuery),Object(p.a)(a)),status:q,pageNumber:e.state.pageNumber+1}}))})).catch((function(t){return e.setState({error:t,status:F})}))},e.handleImageClick=function(t,a){e.props.onImageClick(t,a)},e}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this,r=e.queryName,n=this.props.queryName;r!==n&&(this.setState({status:w,btnVisibility:"visible"}),this.resetPageNumber(),k.getImages(n,this.state.pageNumber).then((function(e){var t=e.data.hits;t.length<12&&a.setState({btnVisibility:"hidden"}),t.length>0?a.setState({arrayOfImagesByQuery:t,status:q,pageNumber:a.state.pageNumber+1}):a.setState({status:F})})).catch((function(e){return a.setState({error:e,status:F})}))),this.state.arrayOfImagesByQuery.length>12&&window.scrollTo({top:this.state.listHeight,behavior:"smooth"})}},{key:"render",value:function(){var e=this,t=this.state,a=t.arrayOfImagesByQuery,r=t.status,n=t.btnVisibility,s=this.props.queryName;return r===M?Object(g.jsx)("h1",{children:"Please, Enter your query!!!"}):r===w?Object(g.jsxs)("div",{style:{marginTop:100},children:[Object(g.jsx)(j.a,{type:"spinner-circle",bgColor:"#3f51b5",title:"",color:"#2a2a2a",size:100}),Object(g.jsxs)("p",{children:["Loading...",s]})]}):r===q?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("ul",{className:L.a.ImageGallery,id:"galleryList",children:a.map((function(t){var a=t.webformatURL,r=t.largeImageURL,n=t.tags,s=t.id;return Object(g.jsx)(v,{imgSrc:a,tags:n,modalImageURL:r,handleImageClick:e.handleImageClick},s)}))}),Object(g.jsx)(N,{handleBtnClick:this.LoadMoreBtnClick,btnVisibility:n})]}):r===F?Object(g.jsxs)("p",{style:{color:"#0d2de0"},children:[Object(g.jsx)("span",{style:{fontSize:16,textDecorationLine:"line-through",color:"red",display:"block"},children:s}),"hasn't find. Try another query again"]}):void 0}}]),a}(r.Component),U=G,E=a(15),R=a.n(E),Q=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).handleEscape=function(t){"Escape"===t.code&&e.props.onClose()},e.handleBackdropClick=function(t){t.currentTarget===t.target&&e.props.onClose()},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleEscape)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleEscape)}},{key:"render",value:function(){var e=this.props,t=e.altName,a=e.imageURL;return Object(s.createPortal)(Object(g.jsx)("div",{className:R.a.Overlay,onClick:this.handleBackdropClick,children:Object(g.jsx)("div",{className:R.a.Modal,children:Object(g.jsx)("img",{src:a,alt:t})})}),document.getElementById("modalRoot"))}}]),a}(r.Component),H=Q,V=(a(100),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={queryName:"",showModal:!1,altModalImageName:"",modalImageURL:""},e.onFormSubmit=function(t){e.setState({queryName:t})},e.onImageClick=function(t,a){e.setState({altModalImageName:t,modalImageURL:a}),e.toggleModal()},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state,t=e.queryName,a=e.showModal,r=e.altModalImageName,n=e.modalImageURL;return Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(y,{onSubmit:this.onFormSubmit}),Object(g.jsx)(U,{queryName:t,onImageClick:this.onImageClick}),a&&Object(g.jsx)(H,{onClose:this.toggleModal,altName:r,imageURL:n})]})}}]),a}(r.Component)),A=V;o.a.render(Object(g.jsx)(n.a.StrictMode,{children:Object(g.jsx)(A,{})}),document.getElementById("root"))},13:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__fnISs",ImageGalleryItemIMG:"ImageGalleryItem_ImageGalleryItemIMG__1huOe"}},15:function(e,t,a){e.exports={Overlay:"Modal_Overlay__2nrUp",Modal:"Modal_Modal__2A1-r"}},29:function(e,t,a){e.exports={Button:"Button_Button__1qlW7"}},30:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__3L-uq"}},35:function(e,t,a){},8:function(e,t,a){e.exports={SearchBar:"SearchBar_SearchBar__1WgM5",SearchForm:"SearchBar_SearchForm__2SpPr",SearchFormBtn:"SearchBar_SearchFormBtn__3SQTH",SearchFormBtnLabel:"SearchBar_SearchFormBtnLabel__1hUgw",SearchFormInput:"SearchBar_SearchFormInput__1UQ1t"}}},[[101,1,2]]]);
//# sourceMappingURL=main.80f7ffd1.chunk.js.map
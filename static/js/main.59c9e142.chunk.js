(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),s=a(11),i=a.n(s),o=(a(35),a(36),a(4)),c=a(5),l=a(7),u=a(6),m=a(27),h=a(8),g=a.n(h),p=a(0),d=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={query:""},e.handleChange=function(t){var a=t.target,r=a.name,n=a.value;e.setState(Object(m.a)({},r,n))},e.handleSubmit=function(t){t.preventDefault();var a=e.state.query;""!==a.trim()?(e.props.onSubmit(a,1),e.setState({query:""})):alert("Enter query before submit")},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state.query,t=this.handleSubmit,a=this.handleChange;return Object(p.jsx)("header",{className:g.a.SearchBar,children:Object(p.jsxs)("form",{className:g.a.SearchForm,onSubmit:t,children:[Object(p.jsx)("button",{type:"submit",className:g.a.SearchFormBtn,children:Object(p.jsx)("span",{className:g.a.SearchFormBtnLabel,children:"Search"})}),Object(p.jsx)("input",{className:g.a.SearchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:e,name:"query",onChange:a})]})})}}]),a}(r.Component),b=d,y=a(16),f=a(28),j=a.n(f),O=a(13),I=a.n(O);var v=function(e){var t=e.imgSrc,a=e.tags,r=e.modalImageURL,n=e.handleImageClick;return Object(p.jsx)("li",{className:I.a.ImageGalleryItem,children:Object(p.jsx)("img",{src:t,alt:a,onClick:function(){return n(a,r)},className:I.a.ImageGalleryItemIMG})})},S=a(29),x=a.n(S);var N=function(e){var t=e.handleBtnClick,a=e.btnVisibility;return Object(p.jsx)("button",{className:x.a.Button,type:"button",onClick:t,style:{visibility:a},children:"Load More"})},_=a(14),B=a.n(_);B.a.defaults.baseURL="https://pixabay.com/api/";var k={getImages:function(e,t){return B.a.get('?image_type="photo"&orientation="horizontal"&q='.concat(e,"&page=").concat(t,"&per_page=12&key=").concat("23141283-b767010b5d5526766e0fab830"))}},L=a(30),C=a.n(L),M="idle",w="pending",q="resolved",F="rejected",U=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={arrayOfImagesByQuery:[],error:null,status:M,btnVisibility:"visible"},e.LoadMoreBtnClick=function(){var t=e.props.queryName,a=e.props.page;e.props.setListOffsetHeight(),e.setState({status:w}),k.getImages(t,a).then((function(t){var r=t.data.hits;r.length<12&&e.setState({btnVisibility:"hidden"}),e.setState((function(e){return{arrayOfImagesByQuery:[].concat(Object(y.a)(e.arrayOfImagesByQuery),Object(y.a)(r)),status:q}})),a+=1,e.props.setPageNumber(a)})).catch((function(t){return e.setState({error:t,status:F})}))},e.handleImageClick=function(t,a){e.props.onImageClick(t,a)},e}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this,r=e.queryName,n=this.props.queryName,s=this.props.page,i=this.props.listHeight;r!==n&&(this.setState({status:w,btnVisibility:"visible"}),k.getImages(n,s).then((function(e){var t=e.data.hits;t.length<12&&a.setState({btnVisibility:"hidden"}),t.length>0?(a.setState({arrayOfImagesByQuery:t,status:q}),s+=1,a.props.setPageNumber(s)):a.setState({status:F})})).catch((function(e){return a.setState({error:e,status:F})}))),this.state.arrayOfImagesByQuery!==t.arrayOfImagesByQuery&&window.scrollTo({top:i,behavior:"smooth"})}},{key:"render",value:function(){var e=this,t=this.state,a=t.arrayOfImagesByQuery,r=t.status,n=t.btnVisibility,s=this.props.queryName,i=this.props.listHeight;return r===M?Object(p.jsx)("h1",{children:"Please, Enter your query!!!"}):r===q||r===w?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("ul",{className:C.a.ImageGallery,id:"galleryList",children:a.map((function(t){var a=t.webformatURL,r=t.largeImageURL,n=t.tags,s=t.id;return Object(p.jsx)(v,{imgSrc:a,tags:n,modalImageURL:r,handleImageClick:e.handleImageClick},s)}))}),r===w?Object(p.jsxs)("div",{style:{marginTop:0===i&&100},children:[Object(p.jsx)(j.a,{type:0!==i?"box-up":"spinner-circle",bgColor:"#3f51b5",title:"",color:"#2a2a2a",size:100}),Object(p.jsxs)("p",{children:["Loading...",s]})]}):Object(p.jsx)(N,{handleBtnClick:this.LoadMoreBtnClick,btnVisibility:n})]}):r===F?Object(p.jsxs)("p",{style:{color:"#0d2de0"},children:[Object(p.jsx)("span",{style:{fontSize:16,textDecorationLine:"line-through",color:"red",display:"block"},children:s}),"hasn't find. Try another query again"]}):void 0}}]),a}(r.Component),G=U,H=a(15),R=a.n(H),E=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).handleEscape=function(t){"Escape"===t.code&&(e.props.onClose(),e.props.resetAppOptions())},e.handleBackdropClick=function(t){t.currentTarget===t.target&&(e.props.onClose(),e.props.resetAppOptions())},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleEscape)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleEscape)}},{key:"render",value:function(){var e=this.props,t=e.altName,a=e.imageURL;return Object(s.createPortal)(Object(p.jsx)("div",{className:R.a.Overlay,onClick:this.handleBackdropClick,children:Object(p.jsx)("div",{className:R.a.Modal,children:Object(p.jsx)("img",{src:a,alt:t})})}),document.getElementById("modalRoot"))}}]),a}(r.Component),A=E,Q=(a(100),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={queryName:"",showModal:!1,altModalImageName:"",modalImageURL:"",pageNumber:1,galleryListHeight:0},e.onFormSubmit=function(t,a){e.setState({queryName:t,pageNumber:a,galleryListHeight:0})},e.setPageNumber=function(t){e.setState({pageNumber:t})},e.setListOffsetHeight=function(){e.setState({galleryListHeight:document.getElementById("galleryList").offsetHeight})},e.onImageClick=function(t,a){e.setState({altModalImageName:t,modalImageURL:a}),e.toggleModal()},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e.resetModalOptionsInState=function(){e.setState({altModalImageName:"",modalImageURL:""})},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state,t=e.queryName,a=e.pageNumber,r=e.galleryListHeight,n=e.showModal,s=e.altModalImageName,i=e.modalImageURL;return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(b,{onSubmit:this.onFormSubmit}),Object(p.jsx)(G,{queryName:t,onImageClick:this.onImageClick,listHeight:r,setListOffsetHeight:this.setListOffsetHeight,setPageNumber:this.setPageNumber,page:a}),n&&Object(p.jsx)(A,{onClose:this.toggleModal,altName:s,imageURL:i,resetAppOptions:this.resetModalOptionsInState})]})}}]),a}(r.Component)),P=Q;i.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(P,{})}),document.getElementById("root"))},13:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__fnISs",ImageGalleryItemIMG:"ImageGalleryItem_ImageGalleryItemIMG__1huOe"}},15:function(e,t,a){e.exports={Overlay:"Modal_Overlay__2nrUp",Modal:"Modal_Modal__2A1-r"}},29:function(e,t,a){e.exports={Button:"Button_Button__1qlW7"}},30:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__3L-uq"}},35:function(e,t,a){},8:function(e,t,a){e.exports={SearchBar:"SearchBar_SearchBar__1WgM5",SearchForm:"SearchBar_SearchForm__2SpPr",SearchFormBtn:"SearchBar_SearchFormBtn__3SQTH",SearchFormBtnLabel:"SearchBar_SearchFormBtnLabel__1hUgw",SearchFormInput:"SearchBar_SearchFormInput__1UQ1t"}}},[[101,1,2]]]);
//# sourceMappingURL=main.59c9e142.chunk.js.map
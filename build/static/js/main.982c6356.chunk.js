(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),o=a(11),c=a.n(o),s=(a(35),a(36),a(4)),i=a(5),l=a(7),m=a(6),u=a(27),h=a(8),d=a.n(h),g=a(0),b=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={query:""},e.handleChange=function(t){var a=t.target,r=a.name,n=a.value;e.setState(Object(u.a)({},r,n))},e.handleSubmit=function(t){t.preventDefault();var a=e.state.query;""!==a.trim()?(e.props.onSubmit(a),e.setState({query:""})):alert("Enter query before submit")},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.query,t=this.handleSubmit,a=this.handleChange;return Object(g.jsx)("header",{className:d.a.SearchBar,children:Object(g.jsxs)("form",{className:d.a.SearchForm,onSubmit:t,children:[Object(g.jsx)("button",{type:"submit",className:d.a.SearchFormBtn,children:Object(g.jsx)("span",{className:d.a.SearchFormBtnLabel,children:"Search"})}),Object(g.jsx)("input",{className:d.a.SearchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:e,name:"query",onChange:a})]})})}}]),a}(r.Component),p=b,y=a(12),j=a(28),f=a.n(j),O=a(14),v=a.n(O);var I=function(e){var t=e.imgSrc,a=e.tags,r=e.modalImageURL,n=(e.id,e.handleImageClick);return Object(g.jsx)("li",{className:v.a.ImageGalleryItem,children:Object(g.jsx)("img",{src:t,alt:a,"data-src":r,onClick:n,className:v.a.ImageGalleryItemIMG})})},S=a(29),_=a.n(S);var x=function(e){var t=e.handleBtnClick,a=e.btnVisibility;return Object(g.jsx)("button",{className:_.a.Button,type:"button",onClick:t,style:{visibility:a},children:"Load More"})},N=a(15),k=a.n(N);k.a.defaults.baseURL="https://pixabay.com/api/";var B={getImages:function(e,t){return k.a.get('?image_type="photo"&orientation="horizontal"&q='.concat(e,"&page=").concat(t,"&per_page=12&key=").concat("23141283-b767010b5d5526766e0fab830"))}},C=a(30),M=a.n(C),w="idle",L="pending",q="resolved",F="rejected",U=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={arrayOfImagesByQuery:[],error:null,status:w,pageNumber:1,btnVisibility:"visible"},e.LoadMoreBtnClick=function(){var t=e.props.queryName;e.setState({status:L}),B.getImages(t,e.state.pageNumber).then((function(t){var a=t.data.hits;a.length<12&&e.setState({btnVisibility:"hidden"}),e.setState((function(t){return{arrayOfImagesByQuery:[].concat(Object(y.a)(t.arrayOfImagesByQuery),Object(y.a)(a)),status:q,pageNumber:e.state.pageNumber+1}}))})).catch((function(t){return e.setState({error:t,status:F})}))},e.handleImageClick=function(t){var a=t.target,r=a.alt,n=a.dataset,o=n.src;console.log("e.target.data-src :>> ",n.src),e.props.onImageClick(r,o)},e}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this,r=e.queryName,n=this.props.queryName;r!==n&&(this.setState({status:L,pageNumber:1,btnVisibility:"visible"}),B.getImages(n,this.state.pageNumber).then((function(e){var t=e.data.hits;t.length<12&&a.setState({btnVisibility:"hidden"}),t.length>0?a.setState({arrayOfImagesByQuery:Object(y.a)(t),status:q,pageNumber:a.state.pageNumber+1}):a.setState({status:F})})).catch((function(e){return a.setState({error:e,status:F})}))),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}},{key:"render",value:function(){var e=this,t=this.state,a=t.arrayOfImagesByQuery,r=t.status,n=t.btnVisibility,o=this.props.queryName;return r===w?Object(g.jsx)("h1",{children:"Please, Enter your query!!!"}):r===L?Object(g.jsxs)("div",{style:{marginTop:100},children:[Object(g.jsx)(f.a,{type:"spinner-circle",bgColor:"#3f51b5",title:"",color:"#2a2a2a",size:100}),Object(g.jsxs)("p",{children:["Loading...",o]})]}):r===q?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("ul",{className:M.a.ImageGallery,children:a.map((function(t){var a=t.webformatURL,r=t.largeImageURL,n=t.tags,o=t.id;return Object(g.jsx)(I,{imgSrc:a,tags:n,modalImageURL:r,handleImageClick:e.handleImageClick},o)}))}),Object(g.jsx)(x,{handleBtnClick:this.LoadMoreBtnClick,btnVisibility:n})]}):r===F?Object(g.jsxs)("p",{children:[Object(g.jsx)("span",{children:o}),"hasn't find. Try another query again"]}):void 0}}]),a}(r.Component),G=U,R=a(16),E=a.n(R),Q=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).handleEscape=function(t){"Escape"===t.code&&e.props.onClose()},e.handleBackdropClick=function(t){t.currentTarget===t.target&&e.props.onClose()},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleEscape)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleEscape)}},{key:"render",value:function(){var e=this.props,t=e.altName,a=e.imageURL;return Object(o.createPortal)(Object(g.jsx)("div",{className:E.a.Overlay,onClick:this.handleBackdropClick,children:Object(g.jsx)("div",{className:E.a.Modal,children:Object(g.jsx)("img",{src:a,alt:t})})}),document.getElementById("modalRoot"))}}]),a}(r.Component),V=Q,A=(a(100),function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={queryName:"",showModal:!1,altModalImageName:"",modalImageURL:""},e.onFormSubmit=function(t){e.setState({queryName:t})},e.onImageClick=function(t,a){console.log("altImageName:",t,"modalImageURL:",a),e.setState({altModalImageName:t,modalImageURL:a}),e.toggleModal()},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.queryName,a=e.showModal,r=e.altModalImageName,n=e.modalImageURL;return Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(p,{onSubmit:this.onFormSubmit}),Object(g.jsx)(G,{queryName:t,onImageClick:this.onImageClick}),a&&Object(g.jsx)(V,{onClose:this.toggleModal,altName:r,imageURL:n})]})}}]),a}(r.Component)),T=A;c.a.render(Object(g.jsx)(n.a.StrictMode,{children:Object(g.jsx)(T,{})}),document.getElementById("root"))},14:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__fnISs",ImageGalleryItemIMG:"ImageGalleryItem_ImageGalleryItemIMG__1huOe"}},16:function(e,t,a){e.exports={Overlay:"Modal_Overlay__2nrUp",Modal:"Modal_Modal__2A1-r"}},29:function(e,t,a){e.exports={Button:"Button_Button__1qlW7"}},30:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__3L-uq"}},35:function(e,t,a){},8:function(e,t,a){e.exports={SearchBar:"SearchBar_SearchBar__1WgM5",SearchForm:"SearchBar_SearchForm__2SpPr",SearchFormBtn:"SearchBar_SearchFormBtn__3SQTH",SearchFormBtnLabel:"SearchBar_SearchFormBtnLabel__1hUgw",SearchFormInput:"SearchBar_SearchFormInput__1UQ1t"}}},[[101,1,2]]]);
//# sourceMappingURL=main.982c6356.chunk.js.map